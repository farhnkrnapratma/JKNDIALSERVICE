// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model UserSession {
  id          String   @id @default(uuid())
  phoneNumber String?
  text        String?
  createdAt   DateTime @default(now())
}

model UssdMenuLog {
  id        Int      @id @default(autoincrement())
  sessionId String
  input     String
  response  String
  createdAt DateTime @default(now())
}

// Data Peserta JKN
model Peserta {
  nik       String @id
  nama      String
  status    String // Aktif/NonAktif
  kelas     String // Kelas I, II, III
  fktp      String // Nama Puskesmas/Klinik
  noHP      String?
  email     String?
  alamat    String?
  noKK      String?
}

// Data Tagihan
model Tagihan {
  id        Int    @id @default(autoincrement())
  nik       String
  bulan     String // Format: "2025-01"
  jumlah    Int    // Iuran bulanan
  tunggakan Int    // Total tunggakan
  denda     Int    @default(0)
}

// Riwayat Pelayanan
model Riwayat {
  id      Int    @id @default(autoincrement())
  nik     String
  tanggal String // Format: "2025-01-15"
  jenis   String // FKTP/Rujukan/Rawat Inap
  detail  String
  faskes  String
}

// Data Pengaduan
model Pengaduan {
  id        Int      @id @default(autoincrement())
  nomor     String   // Nomor HP pelapor
  pesan     String
  status    String   @default("Pending") // Pending/Proses/Selesai
  createdAt DateTime @default(now())
}

// Data Faskes (Fasilitas Kesehatan)
model Faskes {
  id         Int    @id @default(autoincrement())
  kode       String @unique
  nama       String
  jenis      String // FKTP/RS/Klinik
  kabupaten  String
  kecamatan  String
  alamat     String
  telp       String?
  kuotaHari  Int    @default(50) // Kuota harian
}

// Antrian Faskes
model Antrian {
  id          Int      @id @default(autoincrement())
  kodeFaskes  String
  nik         String
  nomorAntri  String
  tanggal     String   // Format: "2025-01-15"
  status      String   @default("Menunggu") // Menunggu/Dilayani/Selesai
  estimasi    String?  // Estimasi waktu
  createdAt   DateTime @default(now())
}

// Konsultasi
model Konsultasi {
  id        Int      @id @default(autoincrement())
  nomor     String
  pertanyaan String
  jawaban   String?
  status    String   @default("Menunggu") // Menunggu/Dijawab
  createdAt DateTime @default(now())
}

// Pendaftaran Baru (Prapendaftaran)
model PendaftaranBaru {
  id         Int      @id @default(autoincrement())
  nik        String
  noKK       String
  nama       String
  domisili   String
  fktpPilihan String
  status     String   @default("Prapendaftaran")
  createdAt  DateTime @default(now())
}
